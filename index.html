<!DOCTYPE html>
<html>
<head>
    <title>YouTube Letöltés</title>
</head>
<body>
    <h1>YouTube Letöltés</h1>
    <form method="post">
        <input type="text" name="youtubeLink" placeholder="YouTube link" required><br><br>
        <label for="fileType">Fájltípus:</label>
        <select name="fileType">
            <option value="audio">Zene (MP3)</option>
            <option value="video">Video (MP4)</option>
        </select><br><br>
        <label for="quality">Minőség:</label>
        <select name="quality">
            <option value="high">Magas</option>
            <option value="medium">Közepes</option>
            <option value="low">Alacsony</option>
        </select><br><br>
        <input type="submit" name="download" value="Letöltés">
    </form>
    
    <?php
    if (isset($_POST['download'])) {
        $youtubeLink = $_POST['youtubeLink'];
        $fileType = $_POST['fileType'];
        $quality = $_POST['quality'];
        
        // Letöltési folyamat
        if ($fileType === 'audio') {
            $command = 'youtube-dl -x --audio-format mp3 --audio-quality ' . $quality . ' ' . escapeshellarg($youtubeLink);
        } else {
            $command = 'youtube-dl -f bestvideo[height<=' . $quality . ']+' . 'bestaudio/best' . ' ' . escapeshellarg($youtubeLink);
        }
        
        // Parancs végrehajtása
        exec($command, $output, $return_var);
        
        if ($return_var === 0) {
            echo 'A letöltés sikeresen megtörtént.';
        } else {
            echo 'Hiba történt a letöltés során.';
        }
    }
    ?>
</body>
</html>
